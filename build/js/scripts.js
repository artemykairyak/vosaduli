"use strict";function selectPeriod(e){$(".period-modal__period-table-item").each(function(i,t){Number($(t).attr("data-month"))<Number($(e).attr("data-month"))&&($(t).addClass("period-modal__period-table-item_disabled"),$(t).removeClass("period-modal__period-table-item_selected")),"first"===$(t).attr("data-order")&&console.log($(t).attr("data-month"))})}function loadThumbnail(e){if(-1!==e.type.indexOf("image",0)){var i=new FileReader;i.onprogress=function(){$(".pub-thumbnail__image-label").text("Загрузка...")},i.onload=function(e){var i=e.target.result;$(".pub-thumbnail__image-label").text(""),$(".pub-thumbnail__image-preview").attr("src",i),$(".pub-thumbnail__image-preview").addClass("pub-thumbnail__image-preview_loaded"),$(".pub-thumbnail__image").addClass("pub-thumbnail__image_loaded"),$(".pub-thumbnail__image").removeClass("pub-thumbnail__image_error")},i.onerror=function(){$(".pub-thumbnail__image").addClass("pub-thumbnail__image_error")},i.readAsDataURL(e),sendFile(e)}else $(".pub-thumbnail__image").addClass("pub-thumbnail__image_error"),$(".pub-thumbnail__image").removeClass("pub-thumbnail__image_loaded"),$(".pub-thumbnail__image-preview").removeClass("pub-thumbnail__image-preview_loaded")}function sendFile(){var e=new FormData;$.ajax({url:"test.html",type:"post",data:e,contentType:!1,processData:!1,success:function(){alert("Файлы были успешно загружены")}})}function cutText(e,i){e.each(function(e,t){var s=$(t).text();if(s.length>i){var a=s.slice(0,i),o=a.slice(0,a.lastIndexOf(" "))+"...";$(t).text(o)}})}function showModal(e){$(".overlay").removeClass("overlay_disabled"),e.removeClass("modal_disabled")}function hideModal(){$(".overlay").addClass("overlay_disabled"),$(".modal").addClass("modal_disabled")}function onTriggerClick(e){e.hasClass("trigger_active")||(e.toggleClass("trigger_active"),e.siblings().removeClass("trigger_active"))}function socTriggerChange(e){e.parent().hasClass("myprofile-soc__trigger_disabled")?(e.parent().removeClass("myprofile-soc__trigger_disabled"),e.parent().find(".myprofile-soc__trigger-state").text(e.parent().hasClass("myprofile-soc__trigger_ok")?"работают":"работает")):(e.parent().addClass("myprofile-soc__trigger_disabled"),e.parent().find(".myprofile-soc__trigger-state").text(e.parent().hasClass("myprofile-soc__trigger_ok")?"не подключены":"не подключен"))}$(function(){if($(".profile-menu__item").on("click",function(e){$(this).find(".profile-menu__submenu").length>0?($(this).toggleClass("profile-menu__item_expand"),$(this).siblings().find(".profile-menu__link").removeClass("profile-menu__link_active"),$(this).find(".profile-menu__link").addClass("profile-menu__link_active")):($(this).find(".profile-menu__link").addClass("profile-menu__link_active"),$(this).siblings().find(".profile-menu__link").removeClass("profile-menu__link_active")),e.preventDefault()}),$(".myprofile__submenu-item").on("click",function(e){e.preventDefault(),$(this).hasClass("myprofile__submenu-item_active")||($(this).toggleClass("myprofile__submenu-item_active"),$(this).siblings().removeClass("myprofile__submenu-item_active")),$(this).hasClass("myprofile__submenu-item_aboutme")?($(".myprofile-content").removeClass("myprofile-section_disabled"),$(".myprofile-soc").addClass("myprofile-section_disabled"),$(".myprofile-contacts").addClass("myprofile-section_disabled")):$(this).hasClass("myprofile__submenu-item_soc")?($(".myprofile-content").addClass("myprofile-section_disabled"),$(".myprofile-soc").removeClass("myprofile-section_disabled"),$(".myprofile-contacts").addClass("myprofile-section_disabled")):$(this).hasClass("myprofile__submenu-item_contacts")&&($(".myprofile-content").addClass("myprofile-section_disabled"),$(".myprofile-soc").addClass("myprofile-section_disabled"),$(".myprofile-contacts").removeClass("myprofile-section_disabled"))}),$(".actions__add-friend").on("click",function(e){e.preventDefault(),$(this).toggleClass("actions__add-friend_sended"),$(this).text($(this).hasClass("actions__add-friend_sended")?"Заявка отправлена":"Добавить в друзья")}),$(".groups-menu__trigger").on("click",function(e){e.preventDefault(),onTriggerClick($(this)),$(this).hasClass("groups-menu__trigger_new")?($(".groups-menu__new-items").removeClass("groups-menu__items_disabled"),$(".groups-menu__best-items").addClass("groups-menu__items_disabled")):$(this).hasClass("groups-menu__trigger_best")&&($(".groups-menu__best-items").removeClass("groups-menu__items_disabled"),$(".groups-menu__new-items").addClass("groups-menu__items_disabled"))}),$(".online-report__trigger").on("click",function(e){e.preventDefault(),onTriggerClick($(this)),$(this).hasClass("online-report__trigger_events")?($(".online-report__events-items").removeClass("online-report__items_disabled"),$(".online-report__news-items").addClass("online-report__items_disabled")):$(this).hasClass("online-report__trigger_news")&&($(".online-report__news-items").removeClass("online-report__items_disabled"),$(".online-report__events-items").addClass("online-report__items_disabled"))}),$(".friends__menu-item").on("click",function(e){$(this).addClass("friends__menu-item_active"),$(this).siblings().removeClass("friends__menu-item_active"),e.preventDefault()}),$('select[name="country"]').on("change",function(){$('select[name="region"]').removeAttr("disabled").parent().removeClass("edit-select_disabled")}),$('select[name="region"]').on("change",function(){$('select[name="city"]').removeAttr("disabled").parent().removeClass("edit-select_disabled")}),$(".myprofile-soc__trigger-trigger").on("click",function(){socTriggerChange($(this))}),$(".header-menu__container").length>0&&$(window).width()<1050?($(".header-menu__item").on("click",function(e){e.preventDefault(),$(this).parent().siblings().find(".header-menu__item").removeClass("header-menu__item_active"),$(this).addClass("header-menu__item_active")}),$(".header-menu__container").owlCarousel({navText:[$(".header-menu__nav-arrow_prev"),$(".header-menu__nav-arrow_next")],items:4,margin:10,nav:!0,dots:!1,loop:!1,mouseDrag:!1,touchDrag:!1,pullDrag:!1,responsive:{0:{items:2.8,nav:!1,margin:10,mouseDrag:!0,touchDrag:!0,pullDrag:!0},690:{items:4}}})):$(".header-menu__container").length>0&&$(window).width()>=1050&&($(".header-menu__container").trigger("destroy.owl.carousel"),$(".header-menu__item").on("click",function(){$(this).siblings().removeClass("header-menu__item_active"),$(this).addClass("header-menu__item_active")})),$(".myprofile-contacts__form-input_phone").length>0&&($(".myprofile-contacts__form-input_phone").val("+7"),$(".myprofile-contacts__form-input_phone").on("keyup",function(){($(this).val().length<2||!$(this).val().startsWith("+7"))&&$(this).val("+7")})),$(".blogs-menu__trigger").on("click",function(e){e.preventDefault(),onTriggerClick($(this))}),$(".moderation-header__tab").on("click",function(){$(this).hasClass("tab_selected")||($(this).toggleClass("tab_selected"),$(this).siblings().removeClass("tab_selected"))}),cutText($(".moderation-articles__article-title"),76),$(".pub-format__format").on("mouseenter",function(){$(this).addClass("pub-format__format_hover")}),$(".pub-format__format").on("mouseleave",function(){$(this).removeClass("pub-format__format_hover")}),$(".pub-format__format").on("click",function(){$(this).siblings().removeClass("pub-format__format_selected"),$(this).addClass("pub-format__format_selected"),$(this).siblings().find(".pub-format__format-radio").removeAttr("checked"),$(this).find(".pub-format__format-radio").attr("checked","checked")}),$(".pub-format__format-radio").on("focus",function(){$(this).parent().addClass().addClass("pub-format__format_hover")}),$(".pub-format__format-radio").on("blur",function(){$(this).parent().addClass().removeClass("pub-format__format_hover")}),$('input[name="thumbnail"]').on("focus",function(){$(this).parent().addClass("pub-thumbnail__image_hover")}),$('input[name="thumbnail"]').on("blur",function(){$(this).parent().removeClass("pub-thumbnail__image_hover")}),$('input[name="period"]').on("focus",function(){$(this).parent().addClass("pub-period__period-btn_hover")}),$('input[name="period"]').on("blur",function(){$(this).parent().removeClass("pub-period__period-btn_hover")}),$(".pub-thumbnail__image").length>0){$('input[type="file"]').on("change",function(){var e=this.files[0];loadThumbnail(e)});var e=$(".pub-thumbnail__image");e[0].ondragover=function(){return e.addClass("pub-thumbnail__image_onDrag"),!1},e[0].ondragleave=function(){return e.removeClass("pub-thumbnail__image_onDrag"),!1},e[0].ondrop=function(i){i.preventDefault();var t=i.dataTransfer.files[0];i.stopPropagation(),e.removeClass("pub-thumbnail__image_onDrag"),loadThumbnail(t)}}$(".pub-theme__input").on("keyup",function(e){if("Slash"===e.code||"Comma"===e.code){var i=$(this).val().slice(0,$(this).val().length);$(this).val(i+" "),$(this).css("color","#2e2e2e")}else $(this).css("color","#9b9b9b")}),$(".pub-theme__input").on("blur",function(){$(this).css("color","#2e2e2e")}),$(".pub-maininfo__content-input").val(""),$(".sign-in-modal__show-pass, .sign-up-modal__show-pass").on("click",function(){"password"===$(this).prev().attr("type")?$(this).prev().attr("type","text").addClass("sign-in-modal__show-pass_showed"):$(this).prev().attr("type","password").removeClass("sign-in-modal__show-pass_showed")}),$(".sign-buttons__sign-in").on("click",function(e){e.preventDefault(),showModal($(".sign-in-modal"))}),$(".sign-buttons__sign-up").on("click",function(e){e.preventDefault(),showModal($(".sign-up-modal"))}),$(".overlay, .modal__close").on("click",function(){hideModal()}),$(".pub-period__period-btn").on("click",function(){showModal($(".period-modal"))});var i=!1;$(".period-modal__period-table-item").on("click",function(){$(this).hasClass("period-modal__period-table-item_selected")?$(this).hasClass("period-modal__period-table-item_selected")?(console.log(1),$(this).removeClass("period-modal__period-table-item_selected"),$(this).prevAll(".period-modal__period-table-item").each(function(e,i){$(i).removeClass("period-modal__period-table-item_disabled"),$(i).hasClass("period-modal__period-table-item_selected")&&$(i).removeClass("period-modal__period-table-item_selected")})):$(this).hasClass("period-modal__period-table-item_disabled"):$(this).hasClass("period-modal__period-table-item_disabled")||($(this).addClass("period-modal__period-table-item_selected"),i||($(this).attr("data-order","first"),i=!0),selectPeriod($(this),i))})});